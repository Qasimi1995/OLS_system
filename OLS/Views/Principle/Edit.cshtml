
@model OLS.ViewModels.PrincipleEditViewModel


@{
    ViewData["Title"] = "Edit";
    var photoPath = Model.ExistingPhotoPath;
    var schoolid = Model.SchoolId;
}

<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                @await Html.PartialAsync("../steps")
                <div style="text-align:center;background-color: #0193df;">
                    <h3 style="padding:5px;color: white;">معلومات مدیر مسوول/د مدير په اړه مالومات/Principal Information</h3>
                </div>
                <form asp-action="Edit" method="post" enctype="multipart/form-data">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>

                    <input hidden asp-for="PersonId" />
                    <input hidden asp-for="ExistingPhotoPath">
                    <input hidden asp-for="SchoolId">

                    @if (ViewBag.Message != null)
                    {

                        // <div><span class="text-info">@ViewBag.Message</span></div>

                        <div class="alert alert-success alert-dismissible fade show">
                            <button type="button" class="close" data-dismiss="alert" role="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                            @ViewBag.Message
                        </div>

                    }

                    <div style="text-align:left;margin-top:5px;">
                        <img id='img-upload' style="width:120px; height:150px;" src="@photoPath" />

                        <div class="input-group">
                            <span class="btn btn-default btn-file">
                                Change Photo
                                <input asp-for="Photo" class="form-control" id="imgInp">


                            </span>
                            @if (ViewBag.photoerror != null)
                            {

                                <div><span class="text-danger">@ViewBag.photoerror</span></div>
                            }


                            <div><span asp-validation-for="Photo" class="text-danger"></span></div>

                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="Name">
                                    اسم /نوم/Name 

                                </label>
                                <input asp-for="Name" class="form-control" />
                                <span asp-validation-for="Name" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="LastName">
                                    تخلص /تخلص/Last Name

                                </label>
                                <input asp-for="LastName" class="form-control" />
                                <span asp-validation-for="LastName" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="FatherName">
                                    ولد /د پلار نوم/Father Name

                                </label>
                                <input asp-for="FatherName" class="form-control" />
                                <span asp-validation-for="FatherName" class="text-danger"></span>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="GrandFatherName">
                                    ولدیت/د نیکه نوم/Grand Father Name

                                </label>
                                <input asp-for="GrandFatherName" class="form-control" />
                                <span asp-validation-for="GrandFatherName" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="Email">
                                    ایمیل/ایمیل/Email

                                </label>
                                <input asp-for="Email" class="form-control" />
                                <span asp-validation-for="Email" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="PhonNumber">
                                    شماره تماس/د اړیکې شمېره/Phone No

                                </label>
                                <input type="number" asp-for="PhonNumber" class="form-control" />
                                <span asp-validation-for="PhonNumber" class="text-danger"></span>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="Nidnumber">
                                    نمبر تذکره /د تذکرې شمېره/NID Number

                                </label>
                                <input type="text" asp-for="Nidnumber" class="form-control" />
                                <span asp-validation-for="Nidnumber" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="EducationLevelID">
                                    درجه تحصیل/د زده کړو درجه/Education Level

                                </label>
                                <select asp-for="EducationLevelID" class="form-control selectTwo" style="width:100%;">
                                    <option selected value="">--Select Education--</option>
                                    @foreach (var EduLevel in ViewBag.EducationLevel)
                                    {
                                        <option value="@EduLevel.EducationLevelId">@EduLevel.EducationLevelNameDari - @EduLevel.EducationLevelName</option>
                                    }
                                </select>
                                <span asp-validation-for="EducationLevelID" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="FacultyTypeId">
                                    رشته تحصیلی/د زده کړو رشته/Education field

                                </label>
                                <select asp-for="FacultyTypeId" class="form-control selectTwo" style="width:100%;">
                                    <option selected value="">--Select Education--</option>
                                    @foreach (var FacultyType in ViewBag.FacultyType)
                                    {
                                        <option value="@FacultyType.FacultyTypeId">@FacultyType.FacultypeNameDari - @FacultyType.FacultypeName</option>
                                    }
                                </select>
                                <span asp-validation-for="FacultyTypeId" class="text-danger"></span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                       
                        
                    </div>

                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="GraduationDate">
                                    سال فراغت/د فراغت کال/Year of Graduation

                                </label>
                                <input asp-for="GraduationDate" class="form-control" />
                                <span asp-validation-for="GraduationDate" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="Nidnumber">
                                    سن/عمر/Age

                                </label>
                                <input asp-for="Age" class="form-control" />
                                <span asp-validation-for="Age" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="Nidnumber">
                                    جنسیت/جنسیت/Gender

                                </label>
                                <select asp-for="GenderTypeId" class="form-control selectTwo" style="width:100%;">
                                    <option selected value="">--Select Gender--</option>
                                    @foreach (var GenderType in ViewBag.GenderType)
                                    {
                                        <option value="@GenderType.GenderTypeId">@GenderType.GenderTypeName - @GenderType.GenderTypeNameDari</option>
                                    }
                                </select>
                                <span asp-validation-for="GenderTypeId" class="text-danger"></span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="Eduservice">
                                    مدت خدمت در معارف/په ښوونه او روزنه کې د خدمت موده/Duration of Service in Education/Duration of Service in Education

                                </label>
                                <input asp-for="Eduservice" class="form-control" />
                                <span asp-validation-for="Eduservice" class="text-danger"></span>
                            </div>
                        </div>

                    </div>



                    <div class="card-header" style="background-color: gainsboro; margin-bottom:10px">
                        <strong>آدرس دایمی/اصلي استوګنځای/Permenant Address</strong>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="PerProvinceId">
                                    ولایت/ولایت/ولایت/Province

                                </label>
                                <select asp-for="PerProvinceId" id="PerProvince" class="form-control selectTwo" style="width:100%;">
                                    <option selected value="">--Select--</option>
                                    @foreach (var Perprovince in ViewBag.Perprovince)
                                    {
                                        <option value="@Perprovince.ProvinceId">@Perprovince.ProvNaDar - @Perprovince.ProvNaEng</option>
                                    }
                                </select>

                                <span asp-validation-for="PerProvinceId" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="PerDistrictId">
                                    ولسوالی/ولسوالۍ/District

                                </label>
                                <select asp-for="PerDistrictId" id="PerDistrict" class="form-control selectTwo" style="width:100%;">
                                    <option selected value="">--Select--</option>
                                    @foreach (var Perdistrict in ViewBag.Perdistrict)
                                    {
                                        <option value="@Perdistrict.DistrictId">@Perdistrict.DistNaDar - @Perdistrict.DistNaEng</option>
                                    }
                                </select>

                                <span asp-validation-for="PerDistrictId" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="PerVillageNahiaId">
                                    قریه یا ناحیه/کلی یا ناحیه/Village or Nahia
                                </label>
                                <input asp-for="PerNahia" class="form-control" />
                                <span asp-validation-for="PerNahia" class="text-danger"></span>
                                @*<select asp-for="PerVillageNahiaId" id="PerVillageNahia" class="form-control">
                             <option selected value="">--Select--</option>
                                @foreach (var PervillageNahia in ViewBag.PervillageNahia)
                                {
                                    <option value="@PervillageNahia.VillageNahiaId"> @PervillageNahia.VillageNameEng</option>
                                }
                            </select>
                            <span asp-validation-for="PerVillageNahiaId" class="text-danger"></span>*@
                            </div>
                        </div>
                    </div>

                    <div class="card-header" style="background-color: gainsboro; margin-bottom:10px">
                        <strong>سکونت فعلی/فعلي استوګنځای/Current Address</strong>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="PreProvinceId">
                                    ولایت/ولایت/Province

                                </label>
                                <select asp-for="PreProvinceId" id="PreProvince" class="form-control selectTwo" style="width:100%;">
                                    <option selected value="">--Select--</option>
                                    @foreach (var Preprovince in ViewBag.Preprovince)
                                    {
                                        <option value="@Preprovince.ProvinceId">@Preprovince.ProvNaDar - @Preprovince.ProvNaEng</option>
                                    }
                                </select>
                                <span asp-validation-for="PreProvinceId" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="PreDistrictId">
                                    ولسوالی/ولسوالۍ/District

                                </label>
                                <select asp-for="PreDistrictId" id="PreDistrict" class="form-control selectTwo" style="width:100%;" >
                                    <option selected value="">--Select--</option>
                                    @foreach (var Predistrict in ViewBag.Predistrict)
                                    {
                                        <option value="@Predistrict.DistrictId">@Predistrict.DistNaDar - @Predistrict.DistNaEng</option>
                                    }
                                </select>

                                <span asp-validation-for="PreDistrictId" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="PreVillageNahiaId">
                                    قریه یا ناحیه/کلی یا ناحیه/Village or Nahia

                                </label>

                                <input asp-for="PreNahia" class="form-control" />
                                <span asp-validation-for="PreNahia" class="text-danger"></span>
                                @*<select asp-for="PreVillageNahiaId" id="PreVillageNahia" class="form-control">
            <option selected value="">--Select--</option>
            @foreach (var PrevillageNahia in ViewBag.PrevillageNahia)
            {
                <option value="@PrevillageNahia.VillageNahiaId"> @PrevillageNahia.VillageNameEng</option>
            }
        </select>*@
                                <span asp-validation-for="PreNahia" class="text-danger"></span>
                            </div>
                        </div>
                    </div>
                    <input type="submit"  value="ثبت/ثبت/Save" class="btn btn-outline-success" />
                    <div style="float:left;">
                        <button type="button" id="nextBtn" style="background-color:#0193df;" onclick="@("window.location.href='" + @Url.Action("Navigate", "FinancialResource") + "'");" class="btn btn-primary">قبلی/مخکی/Previous</button>
                        <button type="button" id="nextBtn" style="background-color:#0193df;" onclick="@("window.location.href='" + @Url.Action("Navigate", "Teacher") + "'");" class="btn btn-primary">بعدی/وروسته/Next</button>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>
<script>
    //Automatically close alert
    window.setTimeout(function () {
        $(".alert").fadeTo(500, 0).slideUp(500, function () {
            $(this).remove();
        });
    }, 5000);

    // In your Javascript (external .js resource or <script> tag)
    $(document).ready(function () {
        $('.selectTwo').select2();
    });

    function Next() {
        var sid = '@schoolid';
        if (sid.length != 0) {
            window.location.href = '@Url.Action("Edit","School",new {schoolId=schoolid })';
        } else {

        window.location.href = '@Url.Action("Create","School")';
        }

    }
        $(document).ready(function(){
            $('#PerProvince').on('change', function () {
                $('#PerDistrict option').remove();
                var provinceid = $('#PerProvince option:selected').val();
                if (provinceid != -1) {

                    $.ajax({

                            type: 'GET',
                            url: '@Url.Action("FindDistrict","Founder")/' + provinceid,
                            success: function(result) {
                            var s = ' <option value="-1">--Select--</option>';
                                for(var i = 0;i<result.length; i++) {
                                     s += ' <option value="'+result[i].id+'">'+result[i].distNameDar+'-'+result[i].distNameEng+'</option>';
                                }
                                  $('#PerDistrict').html(s);
                            }


                        }
                    );
                }
            });
        });

        //fill villages


        @*$(document).ready(function(){
           $('#PerDistrict').on('change', function () {
                $('#PerVillageNahia option').remove();
                var districtid = $('#PerDistrict option:selected').val();
                if (districtid != -1) {

                    $.ajax({

                            type: 'GET',
                            url: '@Url.Action("FindVillagNahia","Founder")/' + districtid,
                            success: function(result) {
                            var s = ' <option value="-1">--Select--</option>';
                                for(var i = 0;i<result.length; i++) {
                                     s += ' <option value="'+result[i].vid+'">'+result[i].vNameEng+'</option>';
                                }
                                  $('#PerVillageNahia').html(s);
                            }


                        }
                    );
                }
            });
        });*@

        //Current address
          $(document).ready(function(){
            $('#PreProvince').on('change', function () {
                $('#PreDistrict option').remove();
                var provinceid = $('#PreProvince option:selected').val();
                if (provinceid != -1) {

                    $.ajax({

                            type: 'GET',
                            url: '@Url.Action("FindDistrict","Founder")/' + provinceid,
                            success: function(result) {
                            var s = ' <option value="-1">--Select--</option>';
                                for(var i = 0;i<result.length; i++) {
                                     s += ' <option value="'+result[i].id+'">'+result[i].distNameDar+'-'+result[i].distNameEng+'</option>';
                                }
                                  $('#PreDistrict').html(s);
                            }


                        }
                    );
                }
            });
        });

        //fill villages


        @*$(document).ready(function(){
           $('#PreDistrict').on('change', function () {
                $('#PreVillageNahia option').remove();
                var districtid = $('#PreDistrict option:selected').val();
                if (districtid != -1) {

                    $.ajax({

                            type: 'GET',
                            url: '@Url.Action("FindVillagNahia","Founder")/' + districtid,
                            success: function(result) {
                            var s = ' <option value="-1">--Select--</option>';
                                for(var i = 0;i<result.length; i++) {
                                     s += ' <option value="'+result[i].vid+'">'+result[i].vNameEng+'</option>';
                                }
                                  $('#PreVillageNahia').html(s);
                            }


                        }
                    );
                }
            });
        });*@

        //image preview

        $(document).ready( function() {
            $(document).on('change', '.btn-file :file', function() {
            var input = $(this),
                label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
            input.trigger('fileselect', [label]);
            });

            $('.btn-file :file').on('fileselect', function(event, label) {

                var input = $(this).parents('.input-group').find(':text'),
                    log = label;

                if( input.length ) {
                    input.val(log);
                }

            });
            function readURL(input) {
                if (input.files && input.files[0]) {
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        $('#img-upload').attr('src', e.target.result);
                    }

                    reader.readAsDataURL(input.files[0]);
                }
            }

            $("#imgInp").change(function(){
                readURL(this);
            });
        });
</script>
<style>
    .btn-file {
        position: relative;
        overflow: hidden;
    }

        .btn-file input[type=file] {
            position: absolute;
            top: 0;
            right: 0;
            min-width: 100%;
            min-height: 100%;
            font-size: 100px;
            text-align: right;
            filter: alpha(opacity=0);
            opacity: 0;
            outline: none;
            background: white;
            cursor: inherit;
            display: block;
        }

    .input-group {
        position: relative;
        display: block;
        -webkit-flex-wrap: wrap;
        -ms-flex-wrap: wrap;
        flex-wrap: wrap;
        -webkit-box-align: stretch;
        -webkit-align-items: stretch;
        -ms-flex-align: stretch;
        align-items: left;
        width: 100%;
        text-align: left;
    }

    #img-upload {
        width: 100%;
    }
</style>

