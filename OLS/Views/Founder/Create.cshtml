@model OLS.ViewModels.FounderViewModel
@inject Microsoft.AspNetCore.Mvc.Localization.IViewLocalizer localizer


@{
    ViewData["Title"] = "Create";
    var culture = Context.Features.Get<Microsoft.AspNetCore.Localization.IRequestCultureFeature>().RequestCulture.UICulture.Name;
}

<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-body">

                @await Html.PartialAsync("../steps")


                <div style="text-align:center;background-color: #0193df;">
                    <h3 style="padding:5px;color: white;"> @localizer["FounderInformation"]   </h3>
                </div>
                <form asp-action="Create" method="post" enctype="multipart/form-data">
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>

                    <div style="margin-top:5px;">
                        <div class="input-group">
                            <span class="btn btn-outline-accent-4 btn-file font-weight-bold" title="  @localizer["Title"]">
                                <img id='img-upload' style="width:120px; height:150px;cursor:pointer" />
                                <input asp-for="Photo" id="imgInp">
                            </span>
                            <div><span asp-validation-for="Photo" class="text-danger"></span></div>
                        </div>
                        <div class=" font-weight-bold " style="text-align:left;margin-left:25px;">@localizer["ChoosePhoto"]</div>
                        

                    </div>

                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="Name">
                                   
                                    @localizer["Name"]

                                </label>
                                <input asp-for="Name" class="form-control" />
                                <span asp-validation-for="Name" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="LastName">
                                  
                                    @localizer["LastName"]

                                </label>
                                <input asp-for="LastName" class="form-control" />
                                <span asp-validation-for="LastName" class="text-danger"></span>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="FatherName">
                                    
                                    @localizer["FatherName"]

                                </label>
                                <input asp-for="FatherName" class="form-control" />
                                <span asp-validation-for="FatherName" class="text-danger"></span>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="GrandFatherName">
                                    
                                    @localizer["GrandFatherName"]

                                </label>
                                <input asp-for="GrandFatherName" class="form-control" />
                                <span asp-validation-for="GrandFatherName" class="text-danger"></span>
                            </div>
                        </div>

                    </div>

                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="Email">
                                  
                                    @localizer["Email"]

                                </label>
                                <input asp-for="Email" class="form-control" />
                                <span asp-validation-for="Email" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="PhonNumber">
                                  
                                    @localizer["PhoneNo"]

                                </label>
                                <input type="number" asp-for="PhonNumber" class="form-control" />
                                <span asp-validation-for="PhonNumber" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="Nidnumber">
                                   
                                    @localizer["NIDNumber"]

                                </label>
                                <input type="text" asp-for="Nidnumber" class="form-control " />
                                <span asp-validation-for="Nidnumber" class="text-danger"></span>
                            </div>
                        </div>
                    </div>

                    <div class="row">

                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="EducationLevelID">
                                  
                                    @localizer["EducationLevel"]
                                </label>
                                <select asp-for="EducationLevelID" class="form-control selectTwo " style="width:100%;">
                                    <option selected value="">--@localizer["Select"]--</option>

                                    @if (culture == "en")
                                    {
                                        @foreach (var EduLevel in ViewBag.EducationLevel)
                                        {
                                            <option value="@EduLevel.EducationLevelId">@EduLevel.EducationLevelName</option>
                                        }
                                    }
                                    else if (culture == "fa")
                                    {
                                        @foreach (var EduLevel in ViewBag.EducationLevel)
                                        {

                                            <option value="@EduLevel.EducationLevelId">@EduLevel.EducationLevelNameDari.Split("-")[0]</option>
                                        }

                                    }
                                    else
                                    {
                                        @foreach (var EduLevel in ViewBag.EducationLevel)
                                        {

                                            <option value="@EduLevel.EducationLevelId">@EduLevel.EducationLevelNameDari.Split("-")[1] </option>
                                        }
                                    }



                                </select>
                                <span asp-validation-for="EducationLevelID" class="text-danger"></span>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="Nidnumber">
                                  
                                    @localizer["Gender"]

                                </label>
                                <select asp-for="GenderTypeId" class="form-control selectTwo" style="width:100%;">
                                    <option selected value="">--@localizer["Select"]--</option>

                                    @if (culture == "en")
                                    {
                                        @foreach (var GenderType in ViewBag.GenderType)
                                        {
                                            <option value="@GenderType.GenderTypeId">@GenderType.GenderTypeName</option>
                                        }
                                    }
                                    else if (culture == "fa")
                                    {
                                        @foreach (var GenderType in ViewBag.GenderType)
                                        {
                                            <option value="@GenderType.GenderTypeId">@GenderType.GenderTypeNameDari.Split("/")[0]</option>
                                        }
                                    }
                                    else
                                    {
                                        @foreach (var GenderType in ViewBag.GenderType)
                                        {
                                            <option value="@GenderType.GenderTypeId">@GenderType.GenderTypeNameDari.Split("/")[1]</option>
                                        }
                                    }



                                </select>
                                <span asp-validation-for="GenderTypeId" class="text-danger"></span>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="Nidnumber">
                                   
                                    @localizer["Age"]

                                </label>
                                <input asp-for="Age" class="form-control" />
                                <span asp-validation-for="Age" class="text-danger"></span>
                            </div>
                        </div>
                    </div>

                    <div class="card-header" style="background-color: gainsboro; margin-bottom:10px">
                        <strong> @localizer["PermenantAddress"]</strong>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="PerProvinceId">
                                  
                                    @localizer["Province"]

                                </label>
                                <select asp-for="PerProvinceId" id="PerProvince" class="form-control selectTwo" style="width:100%;">
                                    <option selected value="">--@localizer["Select"]--</option>
                                    @if (culture == "en")
                                    {
                                        @foreach (var province in ViewBag.province)
                                        {
                                            <option value="@province.ProvinceId">@province.ProvNaEng</option>
                                        }
                                    }
                                    else
                                    {
                                        @foreach (var province in ViewBag.province)
                                        {
                                            <option value="@province.ProvinceId">@province.ProvNaDar </option>
                                        }
                                    }

                                </select>

                                <span asp-validation-for="PerProvinceId" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="PerDistrictId">
                                 
                                    @localizer["District"]

                                </label>
                                <select asp-for="PerDistrictId" id="PerDistrict" class="form-control selectTwo" style="width:100%;">
                                    <option selected value="">-- @localizer["Select"]--</option>
                                </select>
                                <span asp-validation-for="PerDistrictId" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="PerVillageNahiaId">
                                    
                                    @localizer["Village"]
                                </label>

                                <input asp-for="PerNahia" class="form-control" />
                                <span asp-validation-for="PerNahia" class="text-danger"></span>
                                @*<select asp-for="PerNahia" id="PerVillageNahia" class="form-control">
                                        <option selected value="">--Select--</option>
                                    </select>
                                    <span asp-validation-for="PerNahia" class="text-danger"></span>*@
                            </div>
                        </div>
                    </div>

                    <div class="card-header" style="background-color: gainsboro; margin-bottom:10px">
                        <strong>  @localizer["CurrentAddress"]</strong>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="PreProvinceId">
                                
                                    @localizer["Province"]

                                </label>
                                <select asp-for="PreProvinceId" id="PreProvince" class="form-control selectTwo" style="width:100%;">
                                    <option selected value="">--@localizer["Select"]--</option>

                                    @if (culture == "en")
                                    {
                                        @foreach (var province in ViewBag.province)
                                        {
                                            <option value="@province.ProvinceId">@province.ProvNaEng</option>
                                        }
                                    }
                                    else
                                    {
                                        @foreach (var province in ViewBag.province)
                                        {
                                            <option value="@province.ProvinceId">@province.ProvNaDar </option>
                                        }
                                    }

                                  
                                </select>
                                <span asp-validation-for="PreProvinceId" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="PreDistrictId">
                                    
                                    @localizer["District"]

                                </label>
                                <select asp-for="PreDistrictId" id="PreDistrict" class="form-control selectTwo" style="width:100%;">
                                    <option selected value="">--@localizer["Select"]--</option>
                                </select>
                                <span asp-validation-for="PreDistrictId" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="PreVillageNahiaId">
                                  
                                    @localizer["Village"]

                                </label>

                                <input asp-for="PreNahia" class="form-control" />
                                <span asp-validation-for="PreNahia" class="text-danger"></span>
                                @*<select asp-for="PreVillageNahiaId" id="PreVillageNahia" class="form-control" style="height: 3rem">
                                        <option selected value="">--Select--</option>
                                    </select>
                                    <span asp-validation-for="PreVillageNahiaId" class="text-danger"></span>*@
                            </div>
                        </div>
                    </div>
                    <input type="submit" id="btnSave" style="background-color:#0193df;" value="@localizer["Save"]" class="btn btn-primary" />
                    <div style="overflow:auto;">
                        @{
                            var floatValue = "left";
                            if (culture == "en") {
                                floatValue = "right";
                            }

                        }

                        <div style="float:@floatValue">
                            @*<button type="button" id="nextBtn" onclick="@("window.location.href='" + @Url.Action("Navigate", "School") + "'");" class="btn btn-primary">بعدی/وروسته/Next</button>*@

                            <input type="submit" class="btn btn-primary" style="background-color:#0193df;" value="@localizer["Next"]" />
                            @if (ViewBag.Message != null)
                            {
                                //  <div><span class="text-info">@ViewBag.Message</span></div>
                                <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
                                <script src="~/sweetalert/sweetalert.min.js"></script>
                                <script type="text/javascript">
                                                    @*swal({
                                                        "@ViewBag.Message",
                                                        "حساب موفقانه ایجاد گردید / تاسو په بریالیتوب سره یو حساب جوړ کړی",
                                                        "success"
                                                        })*@
                                                    swal({
                                                        title: "@ViewBag.Message",
                                                        text: "   @localizer["Message"]",
                                                        icon: "success",
                                                        button: "OK",
                                                    })
                                                        .then(okay => {
                                                        if (okay) {
                                                            window.location.href = "/Founder/Create/";
                                                        }
                                                    });
                                </script>

                            }

                        </div>
                    </div>

                </form>



            </div>
        </div>
    </div>
</div>



<script>

    // In your Javascript (external .js resource or <script> tag)
    $(document).ready(function () {
        $('.selectTwo').select2();
    });

    $(document).ready(function () {
             var culture = "@culture";
            $('#PerProvince').on('change', function () {
                $('#PerDistrict option').remove();


                var provinceid = $('#PerProvince option:selected').val();
                if (provinceid != -1) {

                    $.ajax({

                            type: 'GET',
                            url: '@Url.Action("FindDistrict","Founder")/' + provinceid,
                        success: function (result) {
                            var s = ' <option value="-1">--@localizer["Select"]--</option>';
                                if (culture == "en") {
                                    for (var i = 0; i < result.length; i++) {
                                        s += ' <option value="' + result[i].id + '">' +  result[i].distNameEng + '</option>';
                                    }
                                } else {
                                    for (var i = 0; i < result.length; i++) {
                                        s += ' <option value="' + result[i].id + '">' + result[i].distNameDar + '</option>';
                                    }
                                }

                                  $('#PerDistrict').html(s);
                            }


                        }
                    );
                }
            });
        });

        //fill villages


        @*$(document).ready(function(){
           $('#PerDistrict').on('change', function () {
                $('#PerVillageNahia option').remove();
                var districtid = $('#PerDistrict option:selected').val();
                if (districtid != -1) {

                    $.ajax({

                            type: 'GET',
                            url: '@Url.Action("FindVillagNahia","Founder")/' + districtid,
                            success: function(result) {
                            var s = ' <option value="-1">--Select--</option>';
                                for(var i = 0;i<result.length; i++) {
                                     s += ' <option value="'+result[i].vid+'">'+result[i].vNameEng+'</option>';
                                }
                                  $('#PerVillageNahia').html(s);
                            }


                        }
                    );
                }
            });
        });*@

        //Current address
         $(document).ready(function () {
               var culture = "@culture";
            $('#PreProvince').on('change', function () {
                $('#PreDistrict option').remove();
                var provinceid = $('#PreProvince option:selected').val();
                if (provinceid != -1) {

                    $.ajax({

                            type: 'GET',
                            url: '@Url.Action("FindDistrict","Founder")/' + provinceid,
                            success: function(result) {
                                var s = ' <option value="-1">--@localizer["Select"]--</option>';
                                if (culture == "en") {
                                    for (var i = 0; i < result.length; i++) {
                                        s += ' <option value="' + result[i].id + '">' + result[i].distNameEng + '</option>';
                                    }
                                } else {
                                    for (var i = 0; i < result.length; i++) {
                                        s += ' <option value="' + result[i].id + '">' + result[i].distNameDar +'</option>';
                                    }
                                }

                                  $('#PreDistrict').html(s);
                            }


                        }
                    );
                }
            });
        });

        //fill villages


        @*$(document).ready(function(){
           $('#PreDistrict').on('change', function () {
                $('#PreVillageNahia option').remove();
                var districtid = $('#PreDistrict option:selected').val();
                if (districtid != -1) {

                    $.ajax({

                            type: 'GET',
                            url: '@Url.Action("FindVillagNahia","Founder")/' + districtid,
                            success: function(result) {
                            var s = ' <option value="-1">--Select--</option>';
                                for(var i = 0;i<result.length; i++) {
                                     s += ' <option value="'+result[i].vid+'">'+result[i].vNameEng+'</option>';
                                }
                                  $('#PreVillageNahia').html(s);
                            }


                        }
                    );
                }
            });
        });*@

        //image preview

        $(document).ready( function() {
            $(document).on('change', '.btn-file :file', function() {
            var input = $(this),
                label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
            input.trigger('fileselect', [label]);
            });

            $('.btn-file :file').on('fileselect', function(event, label) {

                var input = $(this).parents('.input-group').find(':text'),
                    log = label;

                if( input.length ) {
                    input.val(log);
                }

            });
            function readURL(input) {
                if (input.files && input.files[0]) {
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        $('#img-upload').attr('src', e.target.result);
                    }

                    reader.readAsDataURL(input.files[0]);
                }
            }

            $("#imgInp").change(function(){
                readURL(this);
            });
        });
</script>
<style>
    .btn-file {
        position: relative;
        overflow: hidden;
    }

        .btn-file input[type=file] {
            position: absolute;
            top: 0;
            right: 0;
            min-width: 100%;
            min-height: 100%;
            font-size: 100px;
            text-align: right;
            filter: alpha(opacity=0);
            opacity: 0;
            outline: none;
            background: white;
            cursor: pointer;
            display: block;
        }

    .input-group {
        position: relative;
        display: block;
        -webkit-flex-wrap: wrap;
        -ms-flex-wrap: wrap;
        flex-wrap: wrap;
        -webkit-box-align: stretch;
        -webkit-align-items: stretch;
        -ms-flex-align: stretch;
        align-items: left;
        width: 100%;
        text-align: left;
    }

    #img-upload {
        width: 100%;
    }
</style>

